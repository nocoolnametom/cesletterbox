!function(){"use strict";function e(e,t,n){function o(){return r.readyState>3?200===r.status?u(r.responseText):c(r.responseText):null}var u="function"==typeof t?t:function(){},c="function"==typeof n?n:function(){},r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return r.open("GET",e),r.onreadystatechange=o,r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(),r}function t(e,t){e&&"undefined"!=typeof e.innerHTML&&(e.innerHTML=t)}function n(e,t,n){e&&(e.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n))}function o(e,t,n,o){function u(){return s.readyState>3?200===s.status?c(s.responseText):r(s.responseText):null}var c="function"==typeof n?n:function(){},r="function"==typeof o?o:function(){},i=void 0;i="string"==typeof t?t:Object.keys(t).map(function(e){var n=e,o="undefined"!=typeof t[e]?t[e]:"";return encodeURIComponent(n)+"="+encodeURIComponent(o)}).join("&");var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");return s.open("POST",e),s.onreadystatechange=u,s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(i),s}function u(e){var t=void 0,n=void 0,o=[];if("object"===("undefined"==typeof e?"undefined":l(e))&&"FORM"===e.nodeName)for(var u=e.elements.length,c=0;c<u;c++)if(t=e.elements[c],t.name&&!t.disabled&&"file"!==t.type&&"reset"!==t.type&&"submit"!==t.type&&"button"!==t.type)if("select-multiple"===t.type){n=e.elements[c].options.length;for(var r=0;r<n;r++)t.options[r].selected&&(o[o.length]=encodeURIComponent(t.name)+"="+encodeURIComponent(t.options[r].value))}else("checkbox"!==t.type&&"radio"!==t.type||t.checked)&&(o[o.length]=encodeURIComponent(t.name)+"="+encodeURIComponent(t.value));return o.join("&").replace(/%20/g,"+")}function c(){t(document.querySelector("div#shoutbox"),"Triggered ajaxError handler on shoutbox")}function r(){var n=document.querySelector("div#shoutbox");n&&e("/chat_content.html",function(e){t(n,e)},c)}function i(){o("/cgi-bin/psowrte.py",u(document.querySelector("#sb_form")),r,c);var e=document.querySelector("#shoutbox-input .messageInput");e&&e instanceof HTMLInputElement&&(e.value="")}function s(){setTimeout(a,1e4)}function a(){r(),s()}function d(){n(document.querySelector("#sb_form"),"submit",function(e){e.preventDefault();var t=document.querySelector("#nicknameInput"),n=document.querySelector("#messageInput"),o=t.value||"",u=n.value||"";o&&u&&i()});var t=document.querySelector("div#shoutbox");t&&e("/config.json",function(e){var t=void 0;try{t=JSON.parse(e)}catch(e){t={}}var n=t.librarybox.module.shoutbox.status;if(n)a();else{var o=document.getElementById("chatcontainer");o&&(o.style.display="none")}})}var f=Math.round((new Date).getTime()/1e3),p=document.querySelector("span#vc_count");p&&e("/vc_counter.php?client_date="+f,function(e){console.log(e);var n="";t(p,n)});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};document.addEventListener("DOMContentLoaded",function(){d()})}();